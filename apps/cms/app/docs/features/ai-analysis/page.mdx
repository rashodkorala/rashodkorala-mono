import { CodeBlock } from "@/components/docs/code-block"
import { Alert, AlertDescription, AlertTitle } from "@/components/docs/alert"

# AI Photo Analysis

Set up AI-powered metadata generation for your photos using OpenAI GPT-4 Vision.

## Overview

The AI Analysis feature automatically generates photo metadata including:

- Photo titles
- Descriptions
- Categories
- Tags
- Alt text for accessibility
- Location (if identifiable)

## Prerequisites

- OpenAI API account
- OpenAI API key with GPT-4 Vision access
- Credits in your OpenAI account

## Setup

### 1. Get OpenAI API Key

1. Go to [OpenAI Platform](https://platform.openai.com)
2. Sign in or create an account
3. Navigate to **API Keys**
4. Click **Create new secret key**
5. Copy the API key (starts with `sk-`)

### 2. Add to Environment Variables

Add your API key to `.env.local`:

<CodeBlock language="env">
{`OPENAI_API_KEY=sk-your-api-key-here`}
</CodeBlock>

### 3. Restart Development Server

After adding the API key, restart your development server:

<CodeBlock language="bash">
{`pnpm dev`}
</CodeBlock>

## Usage

### In Photo Upload Form

1. Upload a photo using the file selector
2. Click **AI Analyze** button
3. Wait for analysis (typically 2-5 seconds)
4. Review the generated metadata:
   - Title
   - Description
   - Category
   - Tags
   - Alt text
5. Edit any fields as needed
6. Click **Create Photo**

### How It Works

The AI analysis:

1. Converts your image to base64
2. Sends it to OpenAI GPT-4 Vision API
3. Requests structured JSON metadata
4. Parses and normalizes the response
5. Populates the form fields

## Cost Considerations

- **GPT-4 Vision** pricing: ~$0.01-0.03 per image
- Analysis is optional - you can still upload photos manually
- Consider analyzing only important photos to manage costs

## Troubleshooting

### API Key Not Working

- Verify the key is correct in `.env.local`
- Check that the key has GPT-4 Vision access
- Ensure you have credits in your OpenAI account

### Analysis Fails

- Check browser console for errors
- Verify network connection
- Try uploading a different image
- Check OpenAI API status

### Slow Analysis

- GPT-4 Vision can take 2-5 seconds per image
- This is normal - the API processes the entire image
- Consider analyzing photos in smaller batches

<Alert variant="warning">
  <AlertTitle>API Costs</AlertTitle>
  <AlertDescription>
    AI analysis uses OpenAI's paid API. Monitor your usage and costs in the OpenAI dashboard.
  </AlertDescription>
</Alert>

<Alert variant="info">
  <AlertTitle>Privacy</AlertTitle>
  <AlertDescription>
    Images are sent to OpenAI for analysis. Ensure you're comfortable with this before using the feature.
  </AlertDescription>
</Alert>

